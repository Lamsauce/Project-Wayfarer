{% extends 'base.html' %} {% block scripts %}
<link
        rel="stylesheet"
        href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
        crossorigin="anonymous"
/>

<!-- Modal -->
<div
        class="modal fade"
        id="postModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">
          <h1 class="city_title">Create a New Post</h1>
        </h5>
        <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
        ></button>
      </div>
      {% comment %} modal {% endcomment %}
      <div class="modal-body">
        <div class="profilePageContainer">
          <div class="card mb-3" id="postCard" style="max-width: 540px">
            <form action="{% url 'profile' %}" method="POST">
              <div class="titleDiv form-group">
              </div>
              {% csrf_token %}
              {{ post_form.as_p }}
              <div class="modal-footer" style="justify-content: center;">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                  Cancel
                </button>
                <button type="submit" class="btn btn-primary" value="Submit">Submit</button>
                <input type="hidden" name="next" value="{{ next }}" />
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    {% comment %} end of modal body {% endcomment %}

  </div>
</div>
</div>
</div>
{% block modalMainPage %} {% endblock %} {% endblock %} {% block content %}
<div class="profilePageContainer">
  <div class="row">
    {% comment %} List item Column {% endcomment %}
    <div class="col-4 cityListRow">
      <h1 class="city_title">Cities</h1>
      <section class="overflow-auto cityScroll">
        {% for city in cities %} {% if forloop.counter|divisibleby:2 %}
        <div class="card mb-3" style="max-width: 540px">
          <a class="list-group-item list-group-item-action" href="{% url 'city_detail' city.id %}">
            <div class="row g-0">
              <div class="col-md-4">
                <img class="cityListImage" src="{{city.flags}}" alt="..." />
              </div>
              <div class="col-md-8">
                <div class="card-body">
                  <h5 class="card-title">{{ city.name }}</h5>
                  <p class="card-text">{{ city.description }}</p>
                  <p class="card-text">
                    <small class="text-muted">Last updated 3 mins ago</small>
                  </p>
                </div>
              </div>
            </div>
          </a>
        </div>
        {% else %}
        <div class="card mb-3" style="max-width: 540px">
          <a class="list-group-item list-group-item-action" href="{% url 'city_detail' city.id %}">
            <div class="row g-0">
              <div class="col-md-8">
                <div class="card-body">
                  <h5 class="card-title">{{city.name}}</h5>
                  <p class="card-text">{{ city.description }}</p>
                  <p class="card-text">
                    <small class="text-muted">Last updated 3 mins ago</small>
                  </p>
                </div>
              </div>
              <div class="col-md-4">
                <img class="cityListImage" src="{{city.flags}}" alt="..." />
              </div>
            </div>
          </a>
        </div>
        {% endif %} {% endfor %} {% comment %} end col {% endcomment %}
      </section>
    </div>

    {% comment %} Selected city Column {% endcomment %}
    <div
            class="col-8 scrollspy-example"
            data-bs-spy="scroll"
            data-bs-target="#list-example"
            data-bs-offset="0"
            tabindex="0"
    >
      <div class="selected_city">
        <div class="row">
          {% comment %} added id = listitem eventuallythat will allow to open
          seperate city {% endcomment %}
          <div class="col-6" id="list-item-1">
            <div class="cityname">
              <h1>london</h1>
              <h2>United Kingdom</h2>
            </div>
          </div>
          <div class="col-6">
            <div class="user_information">
              {% comment %} userinformation {% endcomment %}
              <div class="user">
                <a href="{% url 'profile_detail' user.id %}"><p class="username">{{profile.username}}</p></a>
                <p class="userlogin text-muted">
                  Joined: {{user.date_joined.month}}, {{user.date_joined.year}}
                </p>
              </div>
            </div>
            <div class="cityimg">
              <img
                      class="cardCityImage"
                      src="https://imageproxy.themaven.net//https%3A%2F%2Fwww.history.com%2F.image%2FMTYyNDg1MjE3MTI1Mjc5Mzk4%2Ftopic-london-gettyimages-760251843-promo.jpg"
                      alt=""
              />
            </div>
          </div>
        </div>
        <div class="posts overflow-auto" id="posts">
          <div class="row">
            <div class="col-6">
              <h1>Posts</h1>
            </div>
            <div class="col-6">
              {% comment %} button {% endcomment %}
              <button
                      type="button"
                      class="btn btn-primary"
                      id="add-btn"
                      data-bs-toggle="modal"
                      data-bs-target="#postModal"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>
          {% for post in posts %}
          <a class="cardATag" href="{% url 'posts_detail' post.id %}">
            {% if forloop.counter|divisibleby:2 %}
            <div class="card mb-3 postsContainer">
              <div class="row g-0">
                <div class="col-md-4">
                  <img
                          class="cardPostImage"
                          src="{{post.user.avatar}}"
                          alt="https://static.independent.co.uk/2020/10/31/17/connery-head.jpg"
                  />
                </div>
                <div class="col-md-8">
                  <div class="card-body">
                    <h5 class="card-title">{{post.title}}</h5>
                    <p class="card-text">
                      {{post.description}}
                    </p>
                    <p class="card-text">
                      <small class="text-muted rightPostProfile"
                      >Created at {{post.created_at}}</small
                      >
                    </p>
                  </div>
                </div>
              </div>
            </div>
            {% else %}
            <div class="card mb-3">
              <div class="row g-0">
                <div class="col-md-8">
                  <div class="card-body">
                    <h5 class="card-title">{{post.title}}</h5>
                    <p class="card-text">
                      {{post.description}}
                    </p>
                    <p class="card-text">
                      <small class="text-muted leftPostProfile">Created at {{post.created_at}}</small>
                    </p>
                  </div>
                </div>
                <div class="col-md-4">
                  <img
                          class="cardPostImage"
                          src="{{post.user.avatar}}"
                          alt="https://ca.slack-edge.com/T0351JZQ0-U01DGR9PCU8-d7d02626fb4c-512"
                          style="float: right"
                  />
                </div>
              </div>
            </div>
            {% endif %}
          </a>
          {% endfor %}
        </div>
      </div>
    </div>
    </a>
    {% comment %} end col {% endcomment %}
  </div>
</div>
{% endblock %}
